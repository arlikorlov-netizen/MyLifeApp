<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MyLife App</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä -->
    <div class="container">
        <!-- –ö–Ω–æ–ø–∫–∞-–±—É—Ä–≥–µ—Ä -->
        <button class="burger-btn" onclick="toggleSidebar()">‚ò∞</button>

        <header>
            <h1>MyLife App</h1>
            <p>–í–∞—à –ª–∏—á–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫</p>
        </header>

        <main class="main-grid">
            <!-- –ö–∞—Ä—Ç–æ—á–∫–∞ –ü—Ä–∏–≤—ã—á–∫–∏ -->
            <div class="card" onclick="showSection('habits')">
                <h2>–ü—Ä–∏–≤—ã—á–∫–∏</h2>
                <p>–û—Ç—Å–ª–µ–∂–∏–≤–∞–π—Ç–µ —Å–≤–æ–π –ø—Ä–æ–≥—Ä–µ—Å—Å</p>
            </div>

            <!-- –ö–∞—Ä—Ç–æ—á–∫–∞ –ë—é–¥–∂–µ—Ç -->
            <div class="card" onclick="showSection('budget')">
                <h2>–ë—é–¥–∂–µ—Ç</h2>
                <p>–ö–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–π—Ç–µ —Ñ–∏–Ω–∞–Ω—Å—ã</p>
            </div>

            <!-- –ö–∞—Ä—Ç–æ—á–∫–∞ –ó–∞–¥–∞—á–∏ -->
            <div class="card" onclick="showSection('tasks')">
                <h2>–ó–∞–¥–∞—á–∏</h2>
                <p>–ü–ª–∞–Ω–∏—Ä—É–π—Ç–µ —Å–≤–æ–π –¥–µ–Ω—å</p>
            </div>
<div class="test-section">
    <h3>üß™ –¢–µ—Å—Ç –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö</h3>
    <button onclick="testDatabase()">–ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç IndexedDB</button>
    <div id="test-output"></div>
</div>
        </main>

        <!-- –¢–µ—Å—Ç–æ–≤–∞—è –∫–Ω–æ–ø–∫–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ JavaScript -->
        <button onclick="testFunction()">–¢–µ—Å—Ç–æ–≤–∞—è –∫–Ω–æ–ø–∫–∞ V2</button>
    </div>

    <!-- –ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å (–í–ù–ï –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞) -->
    <aside class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <h3>–ú–µ–Ω—é</h3>
            <button class="close-btn" onclick="toggleSidebar()">√ó</button>
        </div>
        <nav class="sidebar-nav">
            <a href="#" onclick="showSection('habits'); return false;">–ü—Ä–∏–≤—ã—á–∫–∏</a>
            <a href="#" onclick="showSection('budget'); return false;">–ë—é–¥–∂–µ—Ç</a>
            <a href="#" onclick="showSection('tasks'); return false;">–ó–∞–¥–∞—á–∏</a>
            <a href="#" onclick="showSection('settings'); return false;">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</a>
        </nav>
    </aside>

       <!-- –û–≤–µ—Ä–ª–µ–π –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è –±–æ–∫–æ–≤–æ–π –ø–∞–Ω–µ–ª–∏ -->
    <div class="overlay" id="overlay" onclick="toggleSidebar()"></div>

    <script src="script.js"></script>
// –ü—Ä–æ—Å—Ç–æ–π —Ç–µ—Å—Ç IndexedDB
async function testDatabase() {
    const output = document.getElementById('test-output');
    output.innerHTML = '–¢–µ—Å—Ç–∏—Ä—É–µ–º –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö... ‚è≥';
    
    try {
        // –°–æ–∑–¥–∞—ë–º –ø—Ä–æ—Å—Ç—É—é –±–∞–∑—É –±–µ–∑ –∫–ª–∞—Å—Å–æ–≤
        const dbName = 'MyLifeApp_SimpleTest';
        const request = indexedDB.open(dbName, 1);
        
        request.onerror = (event) => {
            throw new Error('–û—à–∏–±–∫–∞ –æ—Ç–∫—Ä—ã—Ç–∏—è –±–∞–∑—ã: ' + event.target.error);
        };
        
        request.onsuccess = (event) => {
            const db = event.target.result;
            output.innerHTML += '<br>‚úÖ –ë–∞–∑–∞ –æ—Ç–∫—Ä—ã—Ç–∞ —É—Å–ø–µ—à–Ω–æ';
            
            // –°–æ–∑–¥–∞—ë–º —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é
            const transaction = db.transaction(['habits'], 'readwrite');
            const store = transaction.objectStore('habits');
            
            // –î–æ–±–∞–≤–ª—è–µ–º —Ç–µ—Å—Ç–æ–≤—É—é –ø—Ä–∏–≤—ã—á–∫—É
            const habit = {
                name: '–¢–µ—Å—Ç–æ–≤–∞—è –ø—Ä–∏–≤—ã—á–∫–∞',
                createdAt: new Date().toISOString(),
                completed: false
            };
            
            const addRequest = store.add(habit);
            
            addRequest.onsuccess = () => {
                output.innerHTML += `<br>‚úÖ –ü—Ä–∏–≤—ã—á–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞ (ID: ${addRequest.result})`;
                
                // –ß–∏—Ç–∞–µ–º –≤—Å–µ –ø—Ä–∏–≤—ã—á–∫–∏
                const getAllRequest = store.getAll();
                getAllRequest.onsuccess = () => {
                    output.innerHTML += `<br>‚úÖ –í—Å–µ–≥–æ –ø—Ä–∏–≤—ã—á–µ–∫: ${getAllRequest.result.length}`;
                    output.innerHTML += '<br><br>üéâ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Ä–∞–±–æ—Ç–∞–µ—Ç!';
                    db.close();
                };
            };
        };
        
        request.onupgradeneeded = (event) => {
            const db = event.target.result;
            if (!db.objectStoreNames.contains('habits')) {
                db.createObjectStore('habits', { 
                    keyPath: 'id', 
                    autoIncrement: true 
                });
                output.innerHTML += '<br>‚úÖ –•—Ä–∞–Ω–∏–ª–∏—â–µ —Å–æ–∑–¥–∞–Ω–æ';
            }
        };
        
    } catch (error) {
        output.innerHTML += `<br>‚ùå –û—à–∏–±–∫–∞: ${error.message}`;
        console.error('–û—à–∏–±–∫–∞ —Ç–µ—Å—Ç–∞:', error);
    }
}
</body>
</html>
